services:
  homeassistant:
    image: ghcr.io/home-assistant/home-assistant:2026.2.1
    container_name: homeassistant
    network_mode: host
    privileged: true
    restart: unless-stopped
    volumes:
      - ./ha-config:/config
      - ./custom_components/azure_openai_conversation:/config/custom_components/azure_openai_conversation
    environment:
      - TZ=Europe/London

  hassfest:
    image: ghcr.io/home-assistant/hassfest:latest
    volumes:
      - ./custom_components:/github/workspace/custom_components
    profiles: ["tools"]

  hacs:
    image: ghcr.io/hacs/action:main
    volumes:
      - .:/github/workspace
    environment:
      - GITHUB_WORKSPACE=/github/workspace
      - GITHUB_REPOSITORY=joselcaguilar/azure-openai-ha
      - CATEGORY=integration
      - INPUT_IGNORE=brands
      - INPUT_GITHUB_TOKEN=${GITHUB_TOKEN}
    profiles: ["tools"]

  ruff:
    image: ghcr.io/astral-sh/ruff:latest
    command: check .
    volumes:
      - .:/workspace
    working_dir: /workspace
    profiles: ["tools"]
